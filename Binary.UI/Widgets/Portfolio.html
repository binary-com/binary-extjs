<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
	<script src="../Scripts/jquery-1.9.1.js"></script>
	<script src="../Scripts/Binary/Binary.Core.js"></script>
	<script src="../Scripts/Binary/Binary.Api.Proxy.js"></script>
	<script src="../Scripts/Binary/Binary.Api.Client.js"></script>
</head>
<body>
	<style>
		.portfolio
		{
			font-family:proxima-nova,arial;
			font-size: 80%;
			color: #303030;
		}
		.portfolio th, .portfolio td
		{
			border-bottom:2px dotted #AAAAAA;
			text-align:center;
		}
	</style>
	<table id="portfolio" class="portfolio">
		<tr>
			<th style="width:20%;">Ref.</th>
			<th style="width:60%">Contract details</th>
			<th style="width:20%;">Purchase/Payout</th>
		</tr>
	</table>
	<script>
		$(function ()
		{
			Binary.Api.Client.portfolio(function (data)
			{
				var formatDate = function (date)
				{
					return date.getDay() + '-' + date.toString().split(' ')[1] + '-' + (date.getYear() + 1900) + ' ' + date.getHours() + ":" + date.getMinutes() + ':' + date.getSeconds();
				};
				var formatDecimal = function (decimal)
				{
					return parseFloat(Math.round(decimal * 100) / 100).toFixed(2);
				};
				var html='';
				for (var i = 0; i < data.contracts.length; i++)
				{
					var contract = data.contracts[i];
					var html = String.format("<tr><td>{0}</td><td>{1}</td><td>{2}/{3}</td></tr>",
						contract.contract_id ? contract.contract_id : '',
						contract.description,
						formatDecimal(contract.buy_price),
						formatDecimal(contract.payout_price));
					$("#portfolio").append(html);
				};
				//$("#portfolio").append(html);
			}, true);
		});
	</script>
</body>
</html>
