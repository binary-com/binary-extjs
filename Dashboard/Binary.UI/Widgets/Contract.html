<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="../Scripts/ext-all-debug-w-comments.js"></script>
    <script src="../Scripts/ext-theme-neptune.js"></script>
    <link href="../Scripts/ext-theme-neptune-all.css" rel="stylesheet" />
    <script src="../Scripts/jquery-1.9.1.js"></script>
    <script src="../Scripts/Binary/Binary.Core.js?v=5e"></script>
    <script src="../Scripts/Binary/Binary.Api.Proxy.js?v=1"></script>
    <script src="../Scripts/Binary/Binary.Api.Client.js?v=6"></script>
</head>
<body>

    <script>
        Ext.onReady(function ()
        {
            Ext.define('PrecisionNumberfield', {
                extend: 'Ext.form.NumberField',
                alias: 'widget.precisionNumberfield',
                initComponent: function ()
                {
                    this.callParent(arguments);
                },
                setValue: function (v)
                {
                    v = typeof v == 'number' ? v : String(v).replace(this.decimalSeparator, ".");
                    v = isNaN(v) ? '' : String(v).replace(".", this.decimalSeparator);
                    v = isNaN(v) ? '' : this.fixPrecision(String(v).replace(".", this.decimalSeparator));
                    return Ext.form.NumberField.superclass.setRawValue.call(this, v);
                },
                onSpinUp: function ()
                {
                    var me = this;
                    if (!me.readOnly)
                    {
                        var val = parseFloat(me.step);
                        if (me.getValue() !== '')
                        {
                            val = parseFloat(me.getValue());
                            me.setValue((val + parseFloat(me.step)));
                        }
                    }
                },
                fixPrecision: function (value)
                {

                    var nan = isNaN(value);
                    if (!this.allowDecimals || this.decimalPrecision == -1 || nan || !value)
                    {
                        return nan ? '' : value;
                    }
                    return parseFloat(value).toFixed(this.decimalPrecision);
                }
            });
        });
    </script>
    <script src="Mediator.js"></script>
    <script src="MarketSelector.js"></script>
    <script src="Contract.js"></script>
	<div id="marketSelector" style="width:100%"></div>
	<div id="contract-container"></div>
    <script>
        Binary = Binary || {};
        $(function ()
        {
        	Binary.Mediator = Binary.Mediator || Binary.CreateMediator();
        	Binary.MarketSelector = new Binary.MarketSelectorClass('marketSelector');
        	Binary.Mediator.on('symbolChanged', function(symbolData)
        	{
        		prefs.set("CurrentMarket", symbolData.marketDetails.market);
        		prefs.set("CurrentSymbol", symbolData.symbolDetails.symbol);

        		if (!Binary.Contracts)
        		{
        			Binary.Contracts = new Binary.ContractsClass("contract-container", symbolData.symbolDetails.display_name);
        		}
        		else
        		{
        			Binary.Contracts.update(symbolData.symbolDetails.display_name);
        		}
        });
    </script>
</body>
</html>
